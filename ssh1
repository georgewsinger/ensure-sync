Script started on Sat 30 Jan 2016 12:24:25 PM EST
]0;george@ArchBox:~/Dropbox/ensure-sync]0;george@ArchBox: ~/Dropbox/ensure-syncgeorge@ArchBox:~/Dropbox/ensure-sync$ ./ensure-sync.shvim ./ensure-sync.sh 
[?1049h[?1h=[2;1Hâ–½[6n[2;1H  [1;1H[1;49r[?12;25h[?12l[?25h[27m[23m[m[H[2J[?25l[49;1H"./ensure-sync.sh" 93L, 2367C[>c[1;1H[38;5;130m1   [m[34m#! /bin/bash[m
[38;5;130m  1 
  2 [mscript ssh1 dir1 ssh2 dir2
[38;5;130m  3 
  4 [m[36mSSH1[m=[35m$1[m
[38;5;130m  5 [m[36mDIR1[m=[35m$2[m
[38;5;130m  6 [m[36mSSH2[m=[35m$3[m
[38;5;130m  7 [m[36mDIR2[m=[35m$4[m
[38;5;130m  8 
  9 [m[34m##SSH1=""[m
[38;5;130m 10 [m[34m#SSH1="ssh -p 58002 george@192.168.1.2"[m
[38;5;130m 11 
 12 [m[34m##SSH2=""[m
[38;5;130m 13 [m[34m#SSH2="ssh -p 58005 george@192.168.1.5"[m
[38;5;130m 14 [m[34m#DIR1="/home/george/Dropbox"[m
[38;5;130m 15 [m[34m#DIR2="/home/george/Dropbox"[m
[38;5;130m 16 
 17 [m[36mLS1[m=[38;5;130m"[m[31m./ls1[m[38;5;130m"
 18 [m[36mLS2[m=[38;5;130m"[m[31m./ls2[m[38;5;130m"
 19 
 20 echo[m[31m [m[38;5;130m"[m[31mGathering list of files to compare (this may take a few seconds).[m[38;5;130m"
 21 
 22 [m[34m# ls -1a -d -1 $PWD/{*,.*}[m
[38;5;130m 23 [m[34m###"$SSH1" "ls -1a -d -1 $DROPBOX/{*,.*} > $DROPBOX/hash/ArchBox_dirs"[m
[38;5;130m 24 
 25 [m[34m#$SSH1 "ls -1a -d -1 $DIR1/{*,.*}" > $LS1[m
[38;5;130m 26 [m[34m#$SSH2 "ls -1a -d -1 $DIR2/{*,.*}" > $LS2[m
[38;5;130m 27 if [[m [38;5;130m"[m[35m$SSH1[m[38;5;130m"[m [38;5;130m=[m [31m"local"[m [38;5;130m];[m [38;5;130mthen
 28 [m  [38;5;130mls[m [35m-1a[m [38;5;130m-d[m [31m-1[m [35m$DIR1[m/[35m{[m*,.*[35m}[m [38;5;130m>[m [35m$LS1[m
[38;5;130m 29 else
 30 [m  [35m$SSH1[m [38;5;130m"[m[31mls -1a -d -1 [m[35m$DIR1[m[31m/{*,.*}[m[38;5;130m"[m [38;5;130m>[m [35m$LS1[m
[38;5;130m 31 fi
 32 
 33 if [[m [38;5;130m"[m[35m$SSH2[m[38;5;130m"[m [38;5;130m=[m [31m"local"[m [38;5;130m];[m [38;5;130mthen
 34 [m  [38;5;130mls[m [35m-1a[m [38;5;130m-d[m [31m-1[m [35m$DIR2[m/[35m{[m*,.*[35m}[m [38;5;130m>[m [35m$LS1[m
[38;5;130m 35 else
 36 [m  [35m$SSH2[m [38;5;130m"[m[31mls -1a -d -1 [m[35m$DIR2[m[31m/{*,.*}[m[38;5;130m"[m [38;5;130m>[m [35m$LS2[m
[38;5;130m 37 fi
 38 
 39 [m[34m# Correct for strange non-sorting behavior in SSH[m
[38;5;130m 40 [mcat [35m$LS1[m | [38;5;130msort[m [35m-o[m [35m$LS1[m
[38;5;130m 41 [mcat [35m$LS2[m | [38;5;130msort[m [35m-o[m [35m$LS2[m
[38;5;130m 42 
 43 [m[34m# Delete first two lines of each file (noise)[m
[38;5;130m 44 sed[m [35m-i[m [35m-e[m [31m1[m,2d [35m$LS1[m
[38;5;130m 45 sed[m [35m-i[m [35m-e[m [31m1[m,2d [35m$LS2[m
[38;5;130m 46 [m
[1m[7m./ensure-sync.sh                                                                                                                                                            1,1            Top]2;ensure-sync.sh (~/Dropbox/ensure-sync) - VIM]1;ensure-sync.sh[1;5H[?12l[?25hP+q436f\P+q6b75\P+q6b64\P+q6b72\P+q6b6c\P+q2332\P+q2334\P+q2569\P+q2a37\P+q6b31\[?25l[m[38;5;130m  1
2  
  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45[m[48;173H[1m[7m2,0-1[2;5H[?12l[?25h[?25l[m[1;3H[38;5;130m2
  1
3  
  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44[m[48;173H[1m[7m3,1   [3;5H[?12l[?25h[?25l[ms[47mcript ssh1 dir1 ssh2 dir2 [m[49;1H[1m-- VISUAL LINE --[m[49;18H[K[3;5H[?12l[?25h[?25l[1;3H[38;5;130m3
  2
  1[m[1C[47ms[m
[38;5;130m4  
  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 